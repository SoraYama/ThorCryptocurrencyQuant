# ThorCryptoCurrency Strategy Library 快速开始指南

## 5分钟快速上手

### 方式一：Docker 容器化部署（推荐）

#### 第一步：环境准备

#### 1. 安装 Docker 和 Docker Compose
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install docker.io docker-compose

# 启动 Docker 服务
sudo systemctl start docker
sudo systemctl enable docker

# 将当前用户添加到 docker 组（可选）
sudo usermod -aG docker $USER
```

#### 2. 创建数据目录
```bash
sudo mkdir -p /data/docker/ThorCQ/mongo
sudo chown -R $USER:$USER /data/docker/ThorCQ
```

#### 第二步：安装项目

#### 1. 克隆项目
```bash
git clone https://github.com/your-username/ThorCryptocurrencyQuant.git
cd ThorCryptocurrencyQuant
```

#### 2. 配置环境变量
```bash
# 复制环境变量模板
cp env.example .env

# 编辑 .env 文件，填入您的 API 密钥
nano .env
```

#### 第三步：配置 API

#### 1. 获取 Binance API 密钥
1. 访问 [Binance](https://www.binance.com)
2. 注册账户并完成身份验证
3. 进入 API 管理页面
4. 创建新的 API 密钥
5. 记录 API Key 和 Secret

#### 2. 配置环境变量
编辑 `.env` 文件：

```bash
# 交易所配置
EXCHANGE=binance
API_KEY=your_binance_api_key_here
API_SECRET=your_binance_secret_here

# 交易配置
ORDER_SYMBOL=ETH/USDT
```

#### 第四步：运行策略

#### 1. 启动服务
```bash
# 构建并启动所有服务
docker-compose up -d

# 查看运行状态
docker-compose ps

# 查看日志
docker-compose logs -f app
```

#### 2. 查看运行状态
程序运行后会显示：
- 连接状态
- 订单创建信息
- 实时订单状态
- 交易日志

### 方式二：传统部署方式

#### 第一步：环境准备

#### 1. 安装 Python 3.8+
```bash
# Ubuntu/Debian
sudo apt update && sudo apt install python3 python3-pip

# macOS
brew install python3

# Windows
# 从 https://python.org 下载安装
```

#### 2. 安装 MongoDB
```bash
# Ubuntu/Debian
sudo apt install mongodb

# macOS
brew install mongodb-community

# Windows
# 从 https://mongodb.com 下载安装
```

#### 3. 启动 MongoDB 服务
```bash
# Linux
sudo systemctl start mongod

# macOS
brew services start mongodb/brew/mongodb-community

# Windows
# MongoDB 通常会自动启动
```

#### 第二步：安装项目

#### 1. 克隆项目
```bash
git clone https://github.com/your-username/ThorCryptocurrencyQuant.git
cd ThorCryptocurrencyQuant
```

#### 2. 安装依赖
```bash
# 创建虚拟环境（推荐）
python3 -m venv venv
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt
```

#### 第三步：配置 API

#### 1. 获取交易所 API 密钥
1. 访问您选择的交易所网站
2. 注册账户并完成身份验证
3. 进入 API 管理页面
4. 创建新的 API 密钥
5. 记录 API Key 和 Secret

#### 2. 配置策略参数
编辑 `网格策略/bitmex_main-xbt.py` 文件：

```python
# 修改以下配置
apiKey = 'your_api_key_here'  # 替换为您的 API Key
secret = 'your_secret_here'  # 替换为您的 API Secret
order_symbol = 'ETH/USDT'  # 交易品种
```

#### 第四步：运行策略

#### 1. 进入策略目录
```bash
cd 网格策略
```

#### 2. 运行策略
```bash
python3 bitmex_main-xbt.py
```

#### 3. 查看运行状态
程序运行后会显示：
- 连接状态
- 订单创建信息
- 实时订单状态
- 交易日志

### 第五步：监控和管理

#### Docker 容器化部署监控

#### 1. 查看服务状态
```bash
# 查看所有服务状态
docker-compose ps

# 查看服务日志
docker-compose logs -f app
docker-compose logs -f mongo

# 查看实时日志
docker-compose logs --tail=100 -f app
```

#### 2. 查看数据库状态
```bash
# 进入 MongoDB 容器
docker-compose exec mongo mongosh

# 或者直接连接
docker-compose exec mongo mongosh "mongodb://admin:thorcq123@localhost:27017/binance?authSource=admin"

# 查看订单数据
use binance
db['ETH/USDT'].find().pretty()
```

#### 3. 管理服务
```bash
# 停止服务
docker-compose down

# 重启服务
docker-compose restart

# 重新构建并启动
docker-compose up -d --build

# 查看资源使用情况
docker stats
```

#### 传统部署监控

#### 1. 查看数据库状态
```bash
# 连接 MongoDB
mongo

# 查看订单数据
use binance
db['ETH/USDT'].find().pretty()
```

#### 2. 使用 tmux 后台运行
```bash
# 安装 tmux
sudo apt install tmux  # Ubuntu/Debian
brew install tmux      # macOS

# 创建后台会话
tmux new-session -d -s trading
tmux attach-session -t trading

# 在会话中运行策略
cd /path/to/ThorCryptocurrencyQuant/网格策略
python3 bitmex_main-xbt.py

# 分离会话（Ctrl+B, 然后按 D）
# 重新连接：tmux attach-session -t trading
```

## 策略参数说明

### 基础参数
```bash
# 环境变量配置
EXCHANGE=binance           # 交易所名称（binance/bitmex）
ORDER_SYMBOL=ETH/USDT      # 交易品种
ORDER_TYPE=limit           # 订单类型
```

### 网格参数
```bash
# 环境变量配置
NUM_BUY=3                  # 买网格数量（建议 3-10）
NUM_SELL=1                 # 卖网格数量（建议 1-5）
ORDER_SPREAD=0.5           # 网格步长（建议 0.1-2.0）
ORDER_PROFIT=0.5           # 利润目标（建议 0.1-1.0）
ORDER_AMOUNT_BUY=30        # 买单挂单数量
ORDER_AMOUNT_SELL=30       # 卖单挂单数量
```

### 数据库参数
```bash
# 环境变量配置
MONGO_URI=mongodb://mongo:27017/binance  # MongoDB 连接字符串
MONGO_HOST=mongo                          # MongoDB 主机
MONGO_PORT=27017                          # MongoDB 端口
MONGO_DB=binance                          # 数据库名称
```

## 常见问题

### Docker 容器化部署问题

### Q1: Docker 容器无法启动
**A:** 检查以下项目：
- Docker 和 Docker Compose 是否正确安装
- 数据目录 `/data/docker/ThorCQ/mongo` 是否存在且有权限
- `.env` 文件是否正确配置
- 端口 7399 是否被占用

### Q2: MongoDB 连接失败
**A:** 检查以下项目：
- MongoDB 容器是否正常启动：`docker-compose ps`
- 查看 MongoDB 日志：`docker-compose logs mongo`
- 检查网络连接：`docker-compose exec app ping mongo`

### Q3: 应用容器启动失败
**A:** 检查以下项目：
- API 密钥是否正确配置在 `.env` 文件中
- 查看应用日志：`docker-compose logs app`
- 检查依赖安装：`docker-compose exec app pip list`

### Q4: 如何停止和重启服务
**A:** 使用以下方法：
```bash
# 停止所有服务
docker-compose down

# 重启服务
docker-compose restart

# 重新构建并启动
docker-compose up -d --build
```

### 传统部署问题

### Q1: 程序无法启动
**A:** 检查以下项目：
- Python 版本是否为 3.8+
- 是否安装了所有依赖包
- MongoDB 服务是否正在运行
- API 密钥是否正确配置

### Q2: 无法连接交易所
**A:** 检查以下项目：
- 网络连接是否正常
- API 密钥是否有交易权限
- 交易所 API 服务是否正常
- 防火墙设置是否阻止连接

### Q3: 订单创建失败
**A:** 检查以下项目：
- 账户余额是否充足
- 交易对名称是否正确
- 订单参数是否合理
- 交易所是否有交易限制

### Q4: 如何停止策略
**A:** 使用以下方法：
- 按 `Ctrl+C` 停止程序
- 如果使用 tmux，先按 `Ctrl+C`，然后输入 `exit`
- 检查并取消所有未完成的订单

## 安全提醒

### 1. API 密钥安全
- 不要在代码中硬编码 API 密钥
- 使用环境变量存储敏感信息
- 定期轮换 API 密钥
- 限制 API 权限

### 2. 资金安全
- 先在测试网环境测试策略
- 设置合理的资金限额
- 定期监控交易活动
- 备份重要数据

### 3. 系统安全
- 使用防火墙保护服务器
- 定期更新系统和软件
- 使用强密码
- 启用日志监控

## 获取帮助

### 1. 官方资源
- GitHub Issues：提交问题和建议
- 官方文档：查看详细文档
- 社区论坛：与其他用户交流

### 2. 联系方式
- 微信：3404034
- 邮箱：block@163.com

### 3. 贡献代码
- Fork 项目
- 创建功能分支
- 提交 Pull Request

## 免责声明

本项目仅供学习和研究使用，不构成投资建议。使用本项目进行实际交易的所有风险由用户自行承担。请在充分了解风险的前提下谨慎使用。

---

**提示**：建议先在测试环境中运行策略，熟悉系统操作和风险控制，然后再考虑在实盘环境中使用。
